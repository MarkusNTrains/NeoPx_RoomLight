<!-- html realtime: https://htmledit.squarefree.com/-->
<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MoBa Room Light</title>
	<link rel="icon" href="favicon.ico">

	<style type="text/css">
		:root {
            --backgroundColor: #222222;
            --headerBackgroundColor: #444444;
            --BackgroundColorActive: #ffbf00;
            --BackgroundColorHover: #ff8000;
            --sliderBackgroundColor: #4b4b4b;
            --ButtonBackgroundColor: #38a2a7;
		    --SliderThumbColor: var(--sliderBackgroundColor);
            --textColorDark: #000000;
            --textColorLight: #ffffff;
            --boarderColor: #000000;

            background-color: var(--backgroundColor);
            color: var(--textColorLight);

			font-family: Arial, Helvetica, sans-serif;
		}
		.out_box {
			float: left;
			margin: 0 20px 20px 0;
			border: 1px solid blue;
			padding: 0 5px 0 5px;
			min-width: 280px;
		}
		input {
			margin: 10px;
		}
		input {
			vertical-align: -3px;
		}
		h2 {
			font-size: 120%;
			color: var(--textColorLight);
            background-color: var(--headerBackgroundColor);
			margin: 5px 0 5px 0;
			width: calc(100% - 32px);
			border-radius: 4px;
			padding: 8px 16px 8px 16px;
			border: 2px solid var(--boarderColor);
		}
		p, form, button {
			font-size: 80%;
			color: var(--textColorDark);
            background-color: var(--backgroundColor);
		}
        a {
            color: var(--BackgroundColorActive);
        }

        /*----------------------------------------------------------------------*/
		/* box */
		.box {
			background-color: var(--backgroundColor);
			width: 100%;
			border-radius: 4px;
			/*border: 2px solid var(--boarderColor);			*/
		}		
		.box_header {
			font-size: 125%;
			font-weight: bold;
			color: var(--textColorLight);
            background-color: var(--headerBackgroundColor);
			margin: 0 0 10px 0;
			width: calc(100% - 32px);
			padding: 8px 16px 8px 16px;
		}
		.box_content {
			padding: 8px 8px 8px 8px;
		}
		
        /*----------------------------------------------------------------------*/
		/* button */
		.button {
            color: var(--textColorDark);
			background-color: var(--ButtonBackgroundColor);
			/*border: 2px solid var(--ButtonBackgroundColor);*/
			border-radius: 4px;
			padding: 16px 12px;
			text-align: center;
			/*text-decoration: none;*/
			display: inline-block;
			font-size: 16px;
			margin: 4px 4px;
			-webkit-transition-duration: 0.4s; /* Safari */
			transition-duration: 0.4s;
			cursor: pointer;
		}

		.button:hover {
			background-color: var(--BackgroundColorHover);
			color: var(--textColorDark);
		}
		.button:active {
			background-color: var(--BackgroundColorActive);
			color: var(--textColorDark);
			transform: translateY(2px);
		}		
		.button_active {
			background-color: var(--BackgroundColorActive);
			color: var(--textColorDark);
		}
        .disabled {
            color: var(--textColorDark);
			background-color: var(--headerBackgroundColor);
        }
		
        /*----------------------------------------------------------------------*/
        /* user values */
        .user_value {
            border: 0; 
            color: #f6931f; 
            font-weight: bold;
        }

		/*----------------------------------------------------------------------*/
		/* slider */
		.slidecontainer {
			width: 100%;
		}
		
		.slider {
			-webkit-appearance: none;
            -moz-appearance: none;
			width: calc(100% - 15px);
			height: 15px;
			border: 1px solid var(--headerBackgroundColor);
			border-radius: 5px;  
			background: var(--BackgroundColorActive);
			outline: none;
			opacity: 1;
			-webkit-transition: .2s;
			transition: opacity .2s;
		}

		.slider::-webkit-slider-thumb {
			-webkit-appearance: none;
            -moz-appearance: none;
			appearance: none;
			width: 25px;
			height: 25px;
			border-radius: 50%; 
			background: var(--SliderThumbColor);
			cursor: pointer;
		}

		.slider::-moz-range-thumb {
			width: 25px;
			height: 25px;
			border-radius: 50%;
			background: var(--SliderThumbColor);
			cursor: pointer;
		}
		
		
        /*---------------------------------------------------------------------*/
        /* 2 thumb slider */
        .area_row_slider {
            width: 150px;	
        }

        .area_column_slider {
            width: calc(100% - 150px);
        }

        .wrap {
            --dif: calc(var(--max) - var(--min));
            display: grid;
            grid-template: repeat(2, max-content) 2em/1fr 1fr;
            overflow: hidden;
            position: relative;
            margin: 1em auto;
            width: 100%;
            background: linear-gradient(0deg, var(--sliderBackgroundColor) 2em, transparent 0);
            font-family: ubuntu mono, consolas, monaco, monospace;
            /*border: 1px solid;*/
            border-color: var(--sliderBackgroundColor);
            border-radius: 10px;
        }
        .wrap::before, .wrap::after {
            grid-column: 1/span 2;
            grid-row: 3;
            height: 100%;
            background: var(--BackgroundColorActive);
            content: "";
        }
        .wrap::before {
            margin-left: calc((var(--a) - var(--min))/var(--dif)*100%);
            width: calc((var(--b) - var(--a))/var(--dif)*100%);
        }
        .wrap::after {
            margin-left: calc((var(--b) - var(--min))/var(--dif)*100%);
            width: calc((var(--a) - var(--b))/var(--dif)*100%);
        }

        [id=multi-lbl] {
            grid-column: 1/span 2;
        }

        .sr-only {
            position: absolute;
            clip-path: inset(50%);
        }

        input.twoThumbSlider[type=range] {
            grid-column: 1/span 2;
            grid-row: 3;
            z-index: 1;
            top: 0;
            left: 0;
            margin: 0;
            background: none;
            /* get rid of white Chrome background */
            color: var(--SliderThumbColor);
            pointer-events: none;
        }
        input.twoThumbSlider[type=range]::-webkit-slider-runnable-track, input[type=range]::-webkit-slider-thumb, input[type=range] {
            -webkit-appearance: none;
        }
        input.twoThumbSlider[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 100%;
            background: none;
        }
        input.twoThumbSlider[type=range]::-moz-range-track {
            width: 100%;
            height: 100%;
            background: none;
        }
        input.twoThumbSlider[type=range]::-webkit-slider-thumb {
            border: 1px solid var(--backgroundColor);
            /* get rid of Chrom thumb border */
            width: 2em;
            height: 100%;
            border-radius: 0;
            /* get rid of Chrome corner rounding */
            background: currentcolor;
            pointer-events: auto;
        }
        input.twoThumbSlider[type=range]::-moz-range-thumb {
            border: 1px solid var(--backgroundColor);
            /* get rid of Firefox thumb border */
            width: 2em;
            height: 100%;
            border-radius: 0;
            /* get rid of Firefox corner rounding */
            background: currentcolor;
            pointer-events: auto;
        }
        input.twoThumbSlider[type=range]:focus {
            z-index: 2;
            outline: dotted 1px currentcolor;
        }
        input.twoThumbSlider[type=range]:focus, input[type=range]:focus + output {
            color: darkorange;
        }

        output.twoThumbSlider {
            grid-row: 2;
        }
        output.twoThumbSlider:last-child {
            text-align: right;
        }
        output.twoThumbSlider::after {
            counter-reset: c var(--c);
            content: "--" attr(for) ": " counter(c) ";";
        }

        /*---------------------------------------------------------------------*/
        /* Style the tab */
        .tab {
            overflow: hidden;
            background-color: var(--ButtonBackgroundColor);
        }

        /* Style the buttons inside the tab */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            visibility: hidden;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
        }

        /* Change background color of buttons on hover */
        .tab button:hover {
            background-color: var(--BackgroundColorHover);
        }

        /* Create an active/current tablink class */
        .tab button.active {
            background-color: var(--BackgroundColorActive);
        }

        /* Style the tab content */
        .tabcontent {
            display: none;
            padding: 10px 0px;
            border-top: none;
        }

	</style>


	<script type="text/javascript" charset="utf-8">
        //--- const ------------------------------------------------------
        //--- Firmware version
        const GLOBAL_WebserverVersion_Major = 1;
        const GLOBAL_WebserverVersion_Minor = 7;


        const LIGHT_SOURCE =
        {
            RoomLight: 0,
            ShadowStation: 1,
            Nof: 2
        };

        const LIGHTSOURCE_Prefix = [];
        LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] = "RoomLight";
        LIGHTSOURCE_Prefix[LIGHT_SOURCE.ShadowStation] = "ShadowStation";
        
		const ROOMLIGHT_Scene = 
		{
			OfficeTable: 0,
			LightOn: 1,
			Rainbow: 2,
			Sunset: 3,
			Sunrise: 4,
			PowerOff: 5,
            Disco: 6,
            Sbh: 7,
            UserSetting: 8,
			IDLE: 9,
            Lightning: 10,
            Moba: 11,
            Day: 12,
            Night: 13,
            Cloud: 14,
            NOF: 15
		};

        const SIMPLELEDSTRIP_Scene = 
        {
            Off: 0,
            Red: 1,
            Green: 2,
            Blue: 3,
            WarmWhite: 4,
            White: 5,
            ColdWhite: 6,
            Nof: 7
        }

        const XML_RREQUEST = 
        {
            SetArea: "SetArea",
            SetBrightness: "SetBrightness",
            SetColor: "SetColor",
            GetCurrentData: "GetCurrentData",
			GetInfo: "GetInfo",
            SetLightScene: "SetScene",
            SetLightSource: "SetSource",
            SetWhite: "SetWhite",
        };

        const REQUEST_CURRENT_DATA_FROM_SERVER_TIMEOUT_MS = 3000;
        const SERVER_RESPONSE_TIMEOUT_MS = 2500;  // must be shorter than REQUEST_CURRENT_DATA_FROM_ARDUINO_TIMEOUT_MS
        const USER_SETTING_OFFSET = 1;
        

		//--- static variables --------------------------------------------
		var s_lock_send_data = false;
		var s_is_send_data_pending = false;
        var s_pending_xml_request = "";
		var s_sendToServer_timeoutTimer = null;
        var s_requestDataFromServer_intervalTimer = null;
        var s_is_server_connected = true;
		var s_xhttp = null;
        var s_active_lightScene_elementId = "";
        var s_active_lightAnimation_elementId = "";
        var s_active_light_source = LIGHT_SOURCE.RoomLight;


		//--- function prototypes -----------------------------------------


        //--- function ----------------------------------------------------
		function SendDataToServer(xml_request)
		{
			if (s_lock_send_data == false)
			{
				s_lock_send_data = true;
                Reset_RequestCurrentDataFromServer_IntervallTimer();
				nocache = "&nocache=" + Math.random() * 1000000;

                if (s_xhttp != null)
                {
                    s_xhttp.abort();
                    s_xhttp = null;
                }

				s_xhttp = new XMLHttpRequest();
                s_xhttp.timeout = SERVER_RESPONSE_TIMEOUT_MS;
                s_xhttp.ontimeout = function()
                {
                    ConnectionToServerLost();
                }
				s_xhttp.onreadystatechange = function()
				{
					if (this.readyState == XMLHttpRequest.DONE) 
					{
						if (this.status == 200) 
						{
							if (this.responseXML != null) 
							{
								// XML file received from Server
                                if (s_is_server_connected == false)
                                {
                                    s_is_server_connected = true;
                                    document.body.style.cursor = "default";
                                    RequestCurrentDataFromServer();
                                    Button_EnableAll();
                                }

								var re = this.responseXML.getElementsByTagName('info');
								if ((re != undefined) && (re != null) && (re.length > 0))
                                {
                                    var lightsource_map = parseInt(this.responseXML.getElementsByTagName('lightsource')[0].childNodes[0].nodeValue);
                                    var nof_light_sources = 0;
                                    if (lightsource_map & (0x1 << LIGHT_SOURCE.RoomLight))
                                    {
                                        //--- LightSource RoomLight --------------------------------------------------
                                        nof_light_sources++;
                                        document.getElementById(LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + "_TabButton").style.visibility = 'visible';

                                        var led_nof_row = parseInt(this.responseXML.getElementsByTagName('nof_row')[0].childNodes[0].nodeValue);
                                        var led_nof_px = parseInt(this.responseXML.getElementsByTagName('nof_leds')[0].childNodes[0].nodeValue);


                                        //--- update user setting columen and row slider --------------------------------
                                        //<!--<div style="transform: rotate(270deg);">-->
                                        //<div id="slider_row" class="wrap" role="group" aria-labelledby="multi-lbl" style="--a: 0; --b: 5; --min: 0; --max: 5;">
                                        //    <!--<div id="multi-lbl">Multi thumb slider: 0 - 15</div>-->
                                        //    <input id="a" class="twoThumbSlider" type="range" min="0" value="0" max="5" />
                                        //    <!--<output for="a" style="--c: var(--a)"></output>-->
                                        //    <input id="b" class="twoThumbSlider" type="range" min="0" value="5" max="5" />
                                        //    <!--<output for="b" style="--c: var(--b)"></output>-->
                                        //</div>
                                        var slider_row_max = led_nof_row - USER_SETTING_OFFSET;
                                        document.getElementById(LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + "_AreaRow_SliderBox").innerHTML = (
                                            '<div id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_AreaRow_Slider" class="wrap" role="group" aria-labelledby="multi-lbl" style="--a: ' + 0 + '; --b: ' + slider_row_max + '; --min: 0; --max: ' + slider_row_max + ';">'
                                            +   '<input name="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_LedRowSlider_a" id="a" class="twoThumbSlider" type="range" min="0" value="' + 0 + '" max="' + slider_row_max + '" />'
                                            +   '<input name="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_LedRowSlider_b" id="b" class="twoThumbSlider" type="range" min="0" value="' + slider_row_max + '" max="' + slider_row_max + '" />'
                                            + '</div>'
                                        );
                                        if (led_nof_row > 1)
                                        {
                                            document.getElementById(LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + "_AreaRow_Slider").style.visibility = 'visible';
                                        }
                                        else
                                        {
                                            document.getElementById(LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + "_AreaRow_Slider").style.visibility = 'hidden';
                                        }

                                        //<div id="slider_columen" class="wrap" role="group" aria-labelledby="multi-lbl" style="--a: 20; --b: 120; --min: 0; --max: 239">
                                        //    <!--<div id="multi-lbl">Multi thumb slider: 0 - 15</div>-->
                                        //    <input id="a" class="twoThumbSlider" type="range" min="0" value="20" max="239" />
                                        //    <!--<output for="a" style="--c: var(--a)"></output>-->
                                        //    <input id="b" class="twoThumbSlider" type="range" min="0" value="120" max="239" />
                                        //    <!--<output for="b" style="--c: var(--b)"></output>-->
                                        //</div>
                                        var slider_column_max = led_nof_px - USER_SETTING_OFFSET;
                                        document.getElementById(LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + "_AreaColumn_SliderBox").innerHTML = (
                                            '<div id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_AreaColumn_Slider" class="wrap" role="group" aria-labelledby="multi-lbl" style="--a: ' + 0 + '; --b: ' + slider_column_max + '; --min: 0; --max: ' + slider_column_max + '">'
                                            +   '<input name="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_LedColumnSlider_a" id="a" class="twoThumbSlider" type="range" min="0" value="' + 0 + '" max="' + slider_column_max + '" />'
                                            +   '<input name="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_LedColumnSlider_b" id="b" class="twoThumbSlider" type="range" min="0" value="' + slider_column_max + '" max="' + slider_column_max + '" />'
                                            + '</div>'
                                        );

                                    }
                                    else
                                    {
                                        document.getElementById(LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + "_TabButton").style.visibility = 'hidden';
                                    }

                                    if (lightsource_map & (0x1 << LIGHT_SOURCE.ShadowStation))
                                    {
                                        nof_light_sources++;
                                        document.getElementById(LIGHTSOURCE_Prefix[LIGHT_SOURCE.ShadowStation] + "_TabButton").style.visibility = 'visible';
                                    }
                                    else
                                    {
                                        document.getElementById(LIGHTSOURCE_Prefix[LIGHT_SOURCE.ShadowStation] + "_TabButton").style.visibility = 'hidden';
                                    }

                                    if (nof_light_sources == 1)
                                    {
                                        document.getElementById("MainPage").style.display = 'none';
                                        for (var id = 0; id < LIGHT_SOURCE.Nof; id++)
                                        {
                                            document.getElementById(LIGHTSOURCE_Prefix[id] + "_TabButton").style.visibility = 'hidden';
                                        }
                                    }

                                    //--- display Arduino room light firmware version in footer ---------------------
                                    var version_major = this.responseXML.getElementsByTagName('major')[0].childNodes[0].nodeValue;
                                    var version_minor = this.responseXML.getElementsByTagName('minor')[0].childNodes[0].nodeValue;
                                    document.getElementById("footer_version").innerHTML = ("v" + version_major + "." + version_minor);
                                    if ((version_major != GLOBAL_WebserverVersion_Major) || (version_minor != GLOBAL_WebserverVersion_Minor))
                                    {
                                        location.reload();
                                    }
                                }
								
								re = this.responseXML.getElementsByTagName('source');
								if ((re != undefined) && (re != null) && (re.length > 0))
								{
                                    LightSource_Activate(re[0].childNodes[0].nodeValue);
                                }	

								re = this.responseXML.getElementsByTagName('scene');
								if ((re != undefined) && (re != null) && (re.length > 0))
								{
                                    LightScene_ShowAsActive(re[0].childNodes[0].nodeValue);
                                }	

								re = this.responseXML.getElementsByTagName('animation');
								if ((re != undefined) && (re != null) && (re.length > 0))
								{
                                    LightAnimation_ShowAsActive(re[0].childNodes[0].nodeValue);
                                }	

								re = this.responseXML.getElementsByTagName('brightness');
								if ((re != undefined) && (re != null) && (re.length > 0))
								{
									document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_Brightness_Slider").value = re[0].childNodes[0].nodeValue;
									document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_Brightness_Value").innerHTML = re[0].childNodes[0].nodeValue;
								}

                                var color = 0;
								re = this.responseXML.getElementsByTagName('color');
								if ((re != undefined) && (re != null) && (re.length > 0))
								{
									color = parseInt(re[0].childNodes[0].nodeValue);
                                    if (color > 0xFFFFFF)
                                    {
                                        var white = (color >> 24) & 0xFF;
                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_WarmWhite_Slider").value = white;
                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_WarmWhite_Value").innerHTML = white;
                                        colorStr = ('000000' + ((white << 16) | (white << 8) | white).toString(16)).slice(-6);
                            			document.querySelector(':root').style.setProperty('--SliderThumbColor', '#' + colorStr);
                                    }
                                    else
                                    {
                                        var slider_value = 0;
                                        if (((color >= 0xFF0000) && (color <= 0xFFFF00)) && (((color & 0xFF0000) == 0xFF0000) && (((color & 0xFF) == 0x0))))
                                        {
                                            slider_value = ((color & 0xFF00) >> 8);
                                        }
                                        else if (((color >= 0x00FF00) && (color <= 0xFFFF00)) && (((color & 0xFF00) == 0xFF00) && (((color & 0xFF) == 0x0))))
                                        {
                                            slider_value = 511 - ((color & 0xFF0000) >> 16);
                                        }
                                        else if (((color >= 0x00FF00) && (color <= 0x00FFFF)) && (((color & 0xFF00) == 0xFF00) && (((color & 0xFF0000) == 0x0))))
                                        {
                                            slider_value = 512 + (color & 0xFF);
                                        }
                                        else if (((color >= 0x0000FF) && (color <= 0x00FFFF)) && (((color & 0xFF) == 0xFF) && (((color & 0xFF0000) == 0x0))))
                                        {
                                            slider_value = 1023 - ((color & 0x00FF00) >> 8);
                                        }
                                        else if (((color >= 0x0000FF) && (color <= 0xFF00FF)) && (((color & 0xFF) == 0xFF) && (((color & 0xFF00) == 0x0))))
                                        {
                                            slider_value = 1024 + ((color & 0xFF0000) >> 16);
                                        }
                                        else if (((color >= 0xFF0000) && (color <= 0xFF00FF)) && (((color & 0xFF0000) == 0xFF0000) && (((color & 0xFF00) == 0x0))))
                                        {
                                            slider_value = 1535 - (color & 0xFF);
                                        }

                                        // set rgb combined slider
                                        var colorStr = ('000000' + color.toString(16)).slice(-6);
                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRgb_Slider").value = slider_value;
                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRgb_Value").innerHTML = '0x' + colorStr;
                                        document.querySelector(':root').style.setProperty('--SliderThumbColor', '#' + colorStr);
                                    }

                                    // set rgb single slider
                                    var red = (color >> 16) & 0xFF;
                                    var green = (color >> 8) & 0xFF;
                                    var blue = color & 0xFF;
                                    document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRed_Value").innerHTML = red;
                                    document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorGreen_Value").innerHTML = green;
                                    document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorBlue_Value").innerHTML = blue;
                                    document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRed_Slider").value = red;
                                    document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorGreen_Slider").value = green;
                                    document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorBlue_Slider").value = blue;
								}

                                if (s_active_light_source == LIGHT_SOURCE.RoomLight)
                                {
                                    re = this.responseXML.getElementsByTagName('led_area');
                                    if ((re != undefined) && (re != null) && (re.length > 0))
                                    {
                                        var xs = parseInt(this.responseXML.getElementsByTagName('xs')[0].childNodes[0].nodeValue);
                                        var xe = parseInt(this.responseXML.getElementsByTagName('xe')[0].childNodes[0].nodeValue);
                                        var ys = parseInt(this.responseXML.getElementsByTagName('ys')[0].childNodes[0].nodeValue);
                                        var ye = parseInt(this.responseXML.getElementsByTagName('ye')[0].childNodes[0].nodeValue);

                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaRow_Value").innerHTML = ((ys + USER_SETTING_OFFSET) + " - " + (ye + USER_SETTING_OFFSET));
                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaRow_Slider").style.setProperty("--a", ys);
                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaRow_Slider").style.setProperty("--b", ye);
                                        document.getElementsByName(LIGHTSOURCE_Prefix[s_active_light_source] + "_LedRowSlider_a")[0].value = ys;
                                        document.getElementsByName(LIGHTSOURCE_Prefix[s_active_light_source] + "_LedRowSlider_b")[0].value = ye;

                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaColumn_Value").innerHTML = ((xs + USER_SETTING_OFFSET) + " - " + (xe + USER_SETTING_OFFSET));
                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaColumn_Slider").style.setProperty("--a", xs);
                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaColumn_Slider").style.setProperty("--b", xe);
                                        document.getElementsByName(LIGHTSOURCE_Prefix[s_active_light_source] + "_LedColumnSlider_a")[0].value = xs;
                                        document.getElementsByName(LIGHTSOURCE_Prefix[s_active_light_source] + "_LedColumnSlider_b")[0].value = xe;
                                    }
                                }

                                if (s_active_light_source == LIGHT_SOURCE.ShadowStation)
                                {
                                    re = this.responseXML.getElementsByTagName('white');
                                    if ((re != undefined) && (re != null) && (re.length > 0))
                                    {
                                        var white = parseInt(re[0].childNodes[0].nodeValue);
                                        var warm_white = white & 0xFF;
                                        var cold_white = (white >> 8) & 0xFF;

                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_WarmWhite_Value").innerHTML = warm_white;
                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_WarmWhite_Slider").value = warm_white;
                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColdWhite_Value").innerHTML = cold_white;
                                        document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColdWhite_Slider").value = cold_white;
                                    }
                                }   


								if (s_sendToServer_timeoutTimer != null)
								{
									clearTimeout(s_sendToServer_timeoutTimer);
									ReleaseLock();
								}
							}
							else
							{
								alert("XML = NULL");
							}
						}
						else
						{
							ConnectionToServerLost();
						}
					}
				}

				// send HTTP GET request with data
				s_xhttp.open("GET", "ajax_inputs" + xml_request + nocache, true);
				s_xhttp.send();
				
				// lock Send to Arduino
				s_sendToServer_timeoutTimer = setTimeout('ReleaseLock()', REQUEST_CURRENT_DATA_FROM_SERVER_TIMEOUT_MS);
			}
			else
			{
				s_is_send_data_pending = true;
                s_pending_xml_request = xml_request;
			}
		}

        function ConnectionToServerLost()
        {
            s_is_server_connected = false;
            clearInterval(s_requestDataFromServer_intervalTimer);

            document.body.style.cursor = "progress";
            Button_DisableAll();
            document.querySelector(':root').style.setProperty('--SliderThumbColor', '#3F3F3F');
            document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_Brightness_Value").innerHTML = ("loading...");
            document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRgb_Value").innerHTML = ("loading...");
            document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRed_Value").innerHTML = ("loading...");
            document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorGreen_Value").innerHTML = ("loading...");
            document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorBlue_Value").innerHTML = ("loading...");
            document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_WarmWhite_Value").innerHTML = ("loading...");
            if (s_active_light_source == LIGHT_SOURCE.RoomLight) 
            {
                document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaColumn_Value").innerHTML = ("loading...");
                document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaRow_Value").innerHTML = ("loading...");
            }
            else if (s_active_light_source == LIGHT_SOURCE.ShadowStation)
            {
                document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColdWhite_Value").innerHTML = ("loading...");
            }

            document.getElementById("footer_version").innerHTML = ("v" + GLOBAL_WebserverVersion_Major + "." + GLOBAL_WebserverVersion_Minor);

            FindServer();
        }
		
        function SendDataToServerWhenConnected(xml_request)
        {
            if (s_is_server_connected == true)
            {
                SendDataToServer(xml_request);
            }
        }

        function RequestCurrentDataFromServer()
        {
            SendDataToServerWhenConnected("&" + XML_RREQUEST.GetCurrentData);
        }
		
        function FindServer()
        {
            s_is_server_connected = false;
            SendDataToServer("&" + XML_RREQUEST.GetInfo);
        }

        function Reset_RequestCurrentDataFromServer_IntervallTimer()
        {
            clearInterval(s_requestDataFromServer_intervalTimer);
            s_requestDataFromServer_intervalTimer = setInterval(RequestCurrentDataFromServer, REQUEST_CURRENT_DATA_FROM_SERVER_TIMEOUT_MS);
        }
        
		function ReleaseLock()
		{
			s_lock_send_data = false;
			s_sendToServer_timeoutTimer = null;

			if (s_is_send_data_pending == true)
			{
                s_is_send_data_pending = false;
                var xml_request = s_pending_xml_request;
                s_pending_xml_request = "";
				SendDataToServer(xml_request);
			}
		}
		
		function LightSceneButtonPushed(scene, bt)
		{
			LightScene_ShowAsActive(scene)
			SendDataToServerWhenConnected("&" + XML_RREQUEST.SetLightScene + "=" + scene);
		}

        function Button_DisableAll()
        {
			var matches = document.getElementsByClassName('button');
			for (var cnt = 0; cnt < matches.length; cnt++) 
			{
				matches[cnt].classList.add('disabled');
			}
        }

        function Button_EnableAll()
        {
			var matches = document.getElementsByClassName('button');
			for (var cnt = 0; cnt < matches.length; cnt++) 
			{
				matches[cnt].classList.remove('disabled');
			}
        }

        function LightSource_Activate(source)
        {
            if ((source >= 0) && (source < LIGHT_SOURCE.Nof))
            {
                s_active_light_source = source;
                document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_TabButton").click();
            }
        }

        function LightScene_ShowAsActive(scene)
        {
            var nof_scene = 0;
            if (s_active_light_source == LIGHT_SOURCE.RoomLight) {
                nof_scene = ROOMLIGHT_Scene.NOF;
            }
            else if (s_active_light_source == LIGHT_SOURCE.ShadowStation) {
                nof_scene = SIMPLELEDSTRIP_Scene.Nof;
            }
            
            if (s_active_lightScene_elementId != "")
            {
                if (document.getElementById(s_active_lightScene_elementId) != null)
                {
                    document.getElementById(s_active_lightScene_elementId).classList.remove("button_active");
                }
            }
            
            if (scene < nof_scene)
            {
                s_active_lightScene_elementId = LIGHTSOURCE_Prefix[s_active_light_source] + "_Scene" + scene;
                if (document.getElementById(s_active_lightScene_elementId) != null)
                {
    			    document.getElementById(s_active_lightScene_elementId).classList.add("button_active");
                }
            }
            else
            {
                s_active_lightScene_elementId = "";
            }
        }

        function LightAnimation_ShowAsActive(animation)
        {
            if (s_active_light_source != "")
            {
                if (s_active_light_source == LIGHT_SOURCE.RoomLight)
                {
                    if (s_active_lightAnimation_elementId != "")
                    {
                        if (document.getElementById(s_active_lightAnimation_elementId) != null)
                        {
                            document.getElementById(s_active_lightAnimation_elementId).classList.remove("button_active");
                        }
                    }
                    
                    if (animation < ROOMLIGHT_Scene.NOF)
                    {
                        s_active_lightAnimation_elementId = LIGHTSOURCE_Prefix[s_active_light_source] + "_Animation" + animation;
                        if (document.getElementById(s_active_lightAnimation_elementId) != null)
                        {
                            document.getElementById(s_active_lightAnimation_elementId).classList.add("button_active");
                        }
                    }
                    else
                    {
                        s_active_lightAnimation_elementId = "";
                    }
                }
            }
        }

		function BrighntessSliderChanged()
		{
			var slider = document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_Brightness_Slider");
			var output = document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_Brightness_Value");
			output.innerHTML = slider.value;

			SendDataToServerWhenConnected("&" + XML_RREQUEST.SetBrightness + "=" + slider.value);
		}

		function ColorRGBSliderChanged()
		{
			var slider = document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRgb_Slider");
			var output = document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRgb_Value");

			var color = 0;
			if (slider.value > 1279)
			{
				color = 0xFF00FF - (slider.value - 1280);
			}
			else if (slider.value > 1023)
			{
				color = 0x0000FF + ((slider.value - 1024) << 16);
			}
			else if (slider.value > 767)
			{
				color = 0x00FFFF - ((slider.value - 768) << 8);
			}
			else if (slider.value > 511)
			{
				color = 0x00FF00 + (slider.value - 512);
			}
			else if (slider.value > 255)
			{
				color = 0xFFFF00 - ((slider.value - 256) << 16);
			}
			else
			{
				color = 0xFF0000 + (slider.value << 8);
			}

			var colorStr = ('000000' + color.toString(16)).slice(-6);
			output.innerHTML = '0x' + colorStr;
			document.querySelector(':root').style.setProperty('--SliderThumbColor', '#' + colorStr);
			SendDataToServerWhenConnected("&" + XML_RREQUEST.SetColor + "=" + color);
            
            
            var red = (color >> 16) & 0xFF;
            var green = (color >> 8) & 0xFF;
            var blue = color & 0xFF;
			document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRed_Value").innerHTML = red;
			document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorGreen_Value").innerHTML = green;
			document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorBlue_Value").innerHTML = blue;
            document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRed_Slider").value = red;
            document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorGreen_Slider").value = green;
            document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorBlue_Slider").value = blue;
		}

        function ColorRGBSingleSliderChanged()
        {
			var red_slider = document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRed_Slider");
			var green_slider = document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorGreen_Slider");
			var blue_slider = document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorBlue_Slider");

			document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRed_Value").innerHTML = red_slider.value;
			document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorGreen_Value").innerHTML = green_slider.value;
			document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorBlue_Value").innerHTML = blue_slider.value;

            var color = 0;
            color = (red_slider.value << 16);
            color |= (green_slider.value << 8);
            color |= blue_slider.value

			var colorStr = ('000000' + color.toString(16)).slice(-6);
			document.querySelector(':root').style.setProperty('--SliderThumbColor', '#' + colorStr);
			document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColorRgb_Value").innerHTML = colorStr;
			SendDataToServerWhenConnected("&" + XML_RREQUEST.SetColor + "=" + color);			
        }

		function ColorWhiteSliderChanged()
		{
            var warmwhite_slider = document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_WarmWhite_Slider");
            var color = parseInt(warmwhite_slider.value);
            var coldwhite_slider = document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColdWhite_Slider");                

            document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_WarmWhite_Value").innerHTML = color;
            document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_ColdWhite_Value").innerHTML = coldwhite_slider.value;
            color += parseInt(coldwhite_slider.value);
            if (color > 255) { color = 255; }
            colorStr = ('000000' + ((color << 16) | (color << 8) | color).toString(16)).slice(-6);
            document.querySelector(':root').style.setProperty('--SliderThumbColor', '#' + colorStr);

            if (s_active_light_source == LIGHT_SOURCE.RoomLight)
            {
                color = (warmwhite_slider.value << 24) | (coldwhite_slider.value << 16) | (coldwhite_slider.value << 8) | (coldwhite_slider.value);
                SendDataToServerWhenConnected("&" + XML_RREQUEST.SetColor + "=" + color);			
            }
            else
            {
                var white = warmwhite_slider.value
                white |= (coldwhite_slider.value << 8);
                SendDataToServerWhenConnected("&" + XML_RREQUEST.SetWhite + "=" + white);			
            }
		}

		// 2 thumb slider
		"use strict";
		addEventListener('input', e => {
            if (e.target.classList.contains("twoThumbSlider"))
            {
                let _t = e.target;

                _t.parentNode.style.setProperty(`--${_t.id}`, +_t.value);
                
                SliderTwoThumb_Update();
            }
		}, false);

		function SliderTwoThumb_Update()
		{
            var xs = parseInt(getComputedStyle(document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaColumn_Slider")).getPropertyValue('--a'), 10);
            var xe = parseInt(getComputedStyle(document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaColumn_Slider")).getPropertyValue('--b'), 10);
            var ys = parseInt(getComputedStyle(document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaRow_Slider")).getPropertyValue('--a'), 10);
            var ye = parseInt(getComputedStyle(document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaRow_Slider")).getPropertyValue('--b'), 10);

            if (xs > xe)
            {
                var tmp = xs;
                xs = xe;
                xe = tmp;
            }
            if (ys > ye)
            {
                var tmp = ys;
                ys = ye;
                ye = tmp;
            }

			SendDataToServerWhenConnected("&" + XML_RREQUEST.SetArea + "=X" + xs + "-" + xe + "Y" + ys + "-" + ye);
            xs += USER_SETTING_OFFSET;
            xe += USER_SETTING_OFFSET;
            ys += USER_SETTING_OFFSET;
            ye += USER_SETTING_OFFSET;
			document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaColumn_Value").innerHTML = (xs + " - " + xe);
			document.getElementById(LIGHTSOURCE_Prefix[s_active_light_source] + "_AreaRow_Value").innerHTML = (ys + " - " + ye);
		}


        function OpenLightSourceTab(evt, tab_id) 
        {
            var cnt;
            var tabcontent;
            var tablinks;

            tabcontent = document.getElementsByClassName("tabcontent");
            for (cnt = 0; cnt < tabcontent.length; cnt++) {
                tabcontent[cnt].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (cnt = 0; cnt < tablinks.length; cnt++) {
                tablinks[cnt].className = tablinks[cnt].className.replace(" active", "");
            }
            document.getElementById(tab_id).style.display = "block";
            evt.currentTarget.className += " active";

            var active_tab = 0;
            if (tab_id == (LIGHTSOURCE_Prefix[LIGHT_SOURCE.ShadowStation] + "_Tab"))
            {
                active_tab = LIGHT_SOURCE.ShadowStation;
            }
            else
            {
                active_tab = LIGHT_SOURCE.RoomLight;
            }

            if (s_active_light_source != active_tab)
            {
                s_active_light_source = active_tab;
                SendDataToServerWhenConnected("&" + XML_RREQUEST.SetLightSource + "=" + s_active_light_source);
            }
        }


        //--- onload event handler ----------------------------------------
        window.addEventListener('load', (event) => 
        {
            var light_scene = '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Scene' + ROOMLIGHT_Scene.PowerOff + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.PowerOff, this)">Off</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Scene' + ROOMLIGHT_Scene.OfficeTable + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.OfficeTable, this)">B&uuml;rotisch</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Scene' + ROOMLIGHT_Scene.Moba + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.Moba, this)">MoBa</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Scene' + ROOMLIGHT_Scene.LightOn + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.LightOn, this)">All On</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Scene' + ROOMLIGHT_Scene.UserSetting + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.UserSetting, this)">User Set</div>'
            
             var animation = '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Animation' + ROOMLIGHT_Scene.Sunrise + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.Sunrise, this)">Sunrise</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Animation' + ROOMLIGHT_Scene.Day + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.Day, this)">Day</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Animation' + ROOMLIGHT_Scene.Sunset + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.Sunset, this)">Sunset</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Animation' + ROOMLIGHT_Scene.Night + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.Night, this)">Night</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Animation' + ROOMLIGHT_Scene.Cloud + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.Cloud, this)">Clouds</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Animation' + ROOMLIGHT_Scene.Lightning + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.Lightning, this)">Lightning</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Animation' + ROOMLIGHT_Scene.Disco + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.Disco, this)">Disco</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.RoomLight] + '_Animation' + ROOMLIGHT_Scene.Rainbow + '" onclick="LightSceneButtonPushed(ROOMLIGHT_Scene.Rainbow, this)">Rainbow</div>';

            var sbf_lightScene = '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.ShadowStation] + '_Scene' + SIMPLELEDSTRIP_Scene.Off + '" onclick="LightSceneButtonPushed(SIMPLELEDSTRIP_Scene.Off, this)">Off</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.ShadowStation] + '_Scene' + SIMPLELEDSTRIP_Scene.Red + '" onclick="LightSceneButtonPushed(SIMPLELEDSTRIP_Scene.Red, this)">Rot</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.ShadowStation] + '_Scene' + SIMPLELEDSTRIP_Scene.Green + '" onclick="LightSceneButtonPushed(SIMPLELEDSTRIP_Scene.Green, this)">Gr&uuml;n</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.ShadowStation] + '_Scene' + SIMPLELEDSTRIP_Scene.Blue + '" onclick="LightSceneButtonPushed(SIMPLELEDSTRIP_Scene.Blue, this)">Blau</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.ShadowStation] + '_Scene' + SIMPLELEDSTRIP_Scene.WarmWhite + '" onclick="LightSceneButtonPushed(SIMPLELEDSTRIP_Scene.WarmWhite, this)">Warm Weiss</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.ShadowStation] + '_Scene' + SIMPLELEDSTRIP_Scene.White + '" onclick="LightSceneButtonPushed(SIMPLELEDSTRIP_Scene.White, this)">Weiss</div>'
             + '<div class="button disabled" id="' + LIGHTSOURCE_Prefix[LIGHT_SOURCE.ShadowStation] + '_Scene' + SIMPLELEDSTRIP_Scene.ColdWhite + '" onclick="LightSceneButtonPushed(SIMPLELEDSTRIP_Scene.ColdWhite, this)">Kalt Weiss</div>'


            document.getElementById("RoomLight_Scene").innerHTML = light_scene;
            document.getElementById("RoomLight_Animation").innerHTML = animation;
            document.getElementById("ShadowStation_Scene").innerHTML = sbf_lightScene;
            document.getElementById("footer_version").innerHTML = ("v" + GLOBAL_WebserverVersion_Major + "." + GLOBAL_WebserverVersion_Minor);

			FindServer();
        });

    </script>    
</head>

<body>
    <div id="MainPage" class="tab">
        <button id="RoomLight_TabButton" class="tablinks" onclick="OpenLightSourceTab(event, 'RoomLight_Tab')">Raum Licht</button>
        <button id="ShadowStation_TabButton" class="tablinks" onclick="OpenLightSourceTab(event, 'ShadowStation_Tab')">Schattenbahnhof</button>
    </div>

    <div id="RoomLight_Tab" class="tabcontent">
        <div class="box" style="margin-right: 5px; margin-bottom: 15px; width: calc(50% - 5px); float: left;">
            <div class="box_header">Licht Szene</div>
            <div id="RoomLight_Scene" class="box_content" style="padding: 0px;"></div>
        </div>
        <div class="box" style="margin-left: 5px; margin-bottom: 15px; width: calc(50% - 5px); float: left;">
            <div class="box_header">Animation</div>
            <div id="RoomLight_Animation" class="box_content" style="padding: 0px;"></div>
        </div>

        <div class="box" style="clear: left;">
            <div class="box_header">Helligkeit / Farbe</div>
            <div class="box_content">
                <div class="slidecontainer">
                    <label for="RoomLight_Brightness_Value">Helligkeit</label>
                    <label id="RoomLight_Brightness_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="RoomLight_Brightness_Slider" oninput="BrighntessSliderChanged()">
                </div>
                <br>
                
                <div class="slidecontainer">
                    <label for="RoomLight_ColorRgb_Value">RGB</label>
                    <label id="RoomLight_ColorRgb_Value" class="user_value"></label>
                    <input type="range" min="0" max="1535" value="0" class="slider" id="RoomLight_ColorRgb_Slider" oninput="ColorRGBSliderChanged()" style="background-image: linear-gradient(90deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000);">
                </div>
                <div class="slidecontainer">
                    <label for="RoomLight_ColorRed_Value">Rot</label>
                    <label id="RoomLight_ColorRed_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="RoomLight_ColorRed_Slider" oninput="ColorRGBSingleSliderChanged()" style="background-image: linear-gradient(90deg, black, red)">
                </div>
                <div class="slidecontainer">
                    <label for="RoomLight_ColorGreen_Value">Gr&uuml;n</label>
                    <label id="RoomLight_ColorGreen_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="RoomLight_ColorGreen_Slider" oninput="ColorRGBSingleSliderChanged()" style="background-image: linear-gradient(90deg, black, rgb(0, 255, 0))">
                </div>
                <div class="slidecontainer">
                    <label for="RoomLight_ColorBlue_Value">Blau</label>
                    <label id="RoomLight_ColorBlue_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="RoomLight_ColorBlue_Slider" oninput="ColorRGBSingleSliderChanged()" style="background-image: linear-gradient(90deg, black, blue)">
                </div>
                <div class="slidecontainer">
                    <label for="RoomLight_WarmWhite_Value">Warm Weiss</label>
                    <label id="RoomLight_WarmWhite_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="RoomLight_WarmWhite_Slider" oninput="ColorWhiteSliderChanged()" style="background-image: linear-gradient(90deg, black, rgb(255, 234, 76))">
                </div>
                <div class="slidecontainer">
                    <label for="RoomLight_ColdWhite_Value">Kalt Weiss</label>
                    <label id="RoomLight_ColdWhite_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="RoomLight_ColdWhite_Slider" oninput="ColorWhiteSliderChanged()" style="background-image: linear-gradient(90deg, black, white)">
                </div>
            </div>
        </div>
        <br>
        
        <div class="box">
            <div class="box_header">User Set: Beleuchtungsbereich</div>
            <div class="box_content">
                <table style="width: 100%;">
                    <tr>
                        <td>
                            <label for="RoomLight_AreaRow_Value">Reihen</label>
                            <label type="text" id="RoomLight_AreaRow_Value" class="user_value"> loading...</label>      
                        </td>
                        <td>
                            <label for="RoomLight_AreaColumn_Value">L&auml;nge</label>
                            <label type="text" id="RoomLight_AreaColumn_Value" class="user_value"> loading...</label>
                        </td>
                    </tr>
                    <tr>
                        <td id="RoomLight_AreaRow_SliderBox" class="area_row_slider">
                        </td>
                        <td id="RoomLight_AreaColumn_SliderBox" class="led_column_slider">
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div id="ShadowStation_Tab" class="tabcontent">
        <div class="box" style="margin-right: 5px; margin-bottom: 15px;">
            <div class="box_header">Licht Szene</div>
            <div id="ShadowStation_Scene" class="box_content" style="padding: 0px;"></div>
        </div>

        <div class="box" style="clear: left;">
            <div class="box_header">Helligkeit / Farbe</div>
            <div class="box_content">
                <div class="slidecontainer">
                    <label for="ShadowStation_Brightness_Value">Helligkeit</label>
                    <label id="ShadowStation_Brightness_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="ShadowStation_Brightness_Slider" oninput="BrighntessSliderChanged()">
                </div>
                <br>
                
                <div class="slidecontainer">
                    <label for="ShadowStation_ColorRgb_Value">RGB</label>
                    <label id="ShadowStation_ColorRgb_Value" class="user_value"></label>
                    <input type="range" min="0" max="1535" value="0" class="slider" id="ShadowStation_ColorRgb_Slider" oninput="ColorRGBSliderChanged()" style="background-image: linear-gradient(90deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000);">
                </div>
                <div class="slidecontainer">
                    <label for="ShadowStation_ColorRed_Value">Rot</label>
                    <label id="ShadowStation_ColorRed_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="ShadowStation_ColorRed_Slider" oninput="ColorRGBSingleSliderChanged()" style="background-image: linear-gradient(90deg, black, red)">
                </div>
                <div class="slidecontainer">
                    <label for="ShadowStation_ColorGreen_Value">Gr&uuml;n</label>
                    <label id="ShadowStation_ColorGreen_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="ShadowStation_ColorGreen_Slider" oninput="ColorRGBSingleSliderChanged()" style="background-image: linear-gradient(90deg, black, rgb(0, 255, 0))">
                </div>
                <div class="slidecontainer">
                    <label for="ShadowStation_ColorBlue_Value">Blau</label>
                    <label id="ShadowStation_ColorBlue_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="ShadowStation_ColorBlue_Slider" oninput="ColorRGBSingleSliderChanged()" style="background-image: linear-gradient(90deg, black, blue)">
                </div>
                <div class="slidecontainer">
                    <label for="ShadowStation_WarmWhite_Value">Warm Weiss</label>
                    <label id="ShadowStation_WarmWhite_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="ShadowStation_WarmWhite_Slider" oninput="ColorWhiteSliderChanged()" style="background-image: linear-gradient(90deg, black, rgb(255, 234, 76))">
                </div>
                <div class="slidecontainer">
                    <label for="ShadowStation_ColdWhite_Value">Kalt Weiss</label>
                    <label id="ShadowStation_ColdWhite_Value" class="user_value"></label>
                    <input type="range" min="0" max="255" value="0" class="slider" id="ShadowStation_ColdWhite_Slider" oninput="ColorWhiteSliderChanged()" style="background-image: linear-gradient(90deg, black, white)">
                </div>
            </div>
        </div>
    </div>
</body>
</html>